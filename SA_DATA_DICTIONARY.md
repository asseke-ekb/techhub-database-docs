# Словарь данных (Data Dictionary)
## Информационная система TechHub

**Версия:** 1.0
**Дата:** 2025-12-04
**Автор:** Системный аналитик

---

## 1. Общие сведения

**Наименование системы:** TechHub
**Назначение:** Платформа технопарка "Астана Хаб" для поддержки IT-компаний, стартапов и предоставления государственных услуг
**СУБД:** PostgreSQL
**Фреймворк:** Django
**Общее количество таблиц:** 157
**Объём базы данных:** ~5.12 ГБ

---

## 2. Перечень предметных областей

| № | Предметная область | Префикс таблиц | Описание |
|---|-------------------|----------------|----------|
| 1 | Управление пользователями | `account_` | Регистрация, аутентификация, профили пользователей |
| 2 | Управление компаниями | `account_company` | Регистрация и верификация компаний |
| 3 | Государственные услуги | `service_` | Каталог услуг, заявки, экспертиза |
| 4 | Контент-менеджмент | `core_` | События, вакансии, блоги, статьи |
| 5 | Бронирование | `booking_` | Бронирование переговорных комнат |
| 6 | Образование | `techorda_` | Образовательные программы TechOrda |
| 7 | CMS | `landing_` | Конструктор лендингов |
| 8 | НИОКР | `niokr_` | Научно-исследовательские проекты |
| 9 | Сообщество | `community_`, `matchmaking_` | Социальные связи, нетворкинг |

---

## 3. Словарь сущностей

### 3.1. Предметная область: Управление пользователями

#### 3.1.1. account_user (Пользователь)

**Описание:** Основная сущность для хранения информации о пользователях системы.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да | Уникальный идентификатор пользователя | 12345 |
| 2 | email | varchar(400) | Нет | Электронная почта | user@example.com |
| 3 | phone | varchar(100) | Да | Номер телефона | +77001234567 |
| 4 | first_name | varchar(400) | Да | Имя | Алмас |
| 5 | last_name | varchar(400) | Да | Фамилия | Касымов |
| 6 | iin | varchar(100) | Нет | ИИН (индивидуальный идентификационный номер) | 900101350123 |
| 7 | password | varchar(128) | Нет | Хеш пароля | pbkdf2_sha256$... |
| 8 | role | varchar(50) | Да | Роль пользователя в системе | user, admin, expert |
| 9 | is_active | boolean | Да | Признак активности аккаунта | true |
| 10 | is_staff | boolean | Да | Признак доступа к админ-панели | false |
| 11 | is_superuser | boolean | Да | Признак суперпользователя | false |
| 12 | company_id | integer | Нет | FK на основную компанию пользователя | 100 |
| 13 | organization_id | varchar(20) | Нет | FK на организацию (для сотрудников) | astanahub |
| 14 | email_verified | boolean | Да | Признак подтверждения email | true |
| 15 | phone_verified | boolean | Да | Признак подтверждения телефона | true |
| 16 | blocked | boolean | Да | Признак блокировки | false |
| 17 | created_at | timestamp | Да | Дата и время регистрации | 2024-01-15 10:30:00 |
| 18 | updated_at | timestamp | Да | Дата и время последнего обновления | 2024-06-20 14:45:00 |
| 19 | last_login | timestamp | Нет | Дата и время последнего входа | 2024-12-01 09:00:00 |
| 20 | data | jsonb | Да | Дополнительные данные профиля | {"goals": [...]} |
| 21 | tags | jsonb | Да | Теги пользователя | {"article": true} |
| 22 | permissions | jsonb | Да | Дополнительные разрешения | {"documentolog": true} |

**Бизнес-правила:**
- BR-U001: Телефон должен быть уникальным в системе
- BR-U002: Email должен быть уникальным (если указан)
- BR-U003: ИИН должен содержать 12 цифр (если указан)
- BR-U004: Пользователь может быть привязан к нескольким компаниям через account_usercompany

---

#### 3.1.2. account_activation (Активация аккаунта)

**Описание:** Хранение кодов активации для подтверждения email/телефона.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | uuid | uuid | Да (PK) | Уникальный идентификатор записи | 550e8400-e29b-41d4... |
| 2 | email | varchar(200) | Нет | Email для активации | user@example.com |
| 3 | phone | varchar(20) | Нет | Телефон для активации | +77001234567 |
| 4 | code | varchar(6) | Да | 6-значный код активации | 123456 |
| 5 | type | varchar(30) | Да | Тип активации | registration, password_reset |
| 6 | is_active | boolean | Да | Признак актуальности кода | true |
| 7 | iteration | integer | Да | Количество попыток ввода | 0 |
| 8 | user_id | integer | Нет | FK на пользователя | 12345 |
| 9 | data | jsonb | Да | Дополнительные данные | {} |
| 10 | created_at | timestamp | Да | Дата создания кода | 2024-12-01 10:00:00 |

**Бизнес-правила:**
- BR-A001: Код активации действителен 10 минут
- BR-A002: Максимум 3 попытки ввода неверного кода
- BR-A003: После успешной активации is_active = false

---

### 3.2. Предметная область: Управление компаниями

#### 3.2.1. account_company (Компания)

**Описание:** Информация о компаниях (юридических лицах и ИП), зарегистрированных в системе.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Уникальный идентификатор | 1000 |
| 2 | tin | varchar(12) | Нет | БИН/ИИН компании | 123456789012 |
| 3 | name | varchar(1000) | Да | Полное наименование | ТОО "Инновации" |
| 4 | short_name | varchar(200) | Да | Краткое наименование | Инновации |
| 5 | company_type | varchar(30) | Да | Тип компании | law, ip, unknown |
| 6 | status | varchar(20) | Да | Статус компании | active, blocked |
| 7 | verified | boolean | Да | Признак верификации | true |
| 8 | address | varchar(2000) | Да | Юридический адрес | г. Астана, ул. Мангилик Ел, 55 |
| 9 | bank | varchar(200) | Да | Наименование банка | Kaspi Bank |
| 10 | iik | varchar(20) | Да | ИИК (расчётный счёт) | KZ123456789012345678 |
| 11 | bik | varchar(20) | Да | БИК банка | CASPKZKA |
| 12 | kbe | smallint | Нет | КБе (код бенефициара) | 17 |
| 13 | email | varchar(200) | Да | Email компании | info@company.kz |
| 14 | phone | varchar(30) | Да | Телефон компании | +77172123456 |
| 15 | website | varchar(1000) | Да | Веб-сайт | https://company.kz |
| 16 | description | text | Да | Описание компании | Компания занимается... |
| 17 | author_id | integer | Нет | FK на создателя | 12345 |
| 18 | director_first_name | varchar(200) | Да | Имя директора | Алмас |
| 19 | director_last_name | varchar(200) | Да | Фамилия директора | Касымов |
| 20 | tag_startup | jsonb | Да | Данные тега "Стартап" | {"status": "active"} |
| 21 | tag_it_company | jsonb | Да | Данные тега "IT-компания" | {"status": "inactive"} |
| 22 | tag_techpark | jsonb | Да | Данные тега "Резидент технопарка" | {"status": "active"} |
| 23 | created_at | timestamp | Да | Дата регистрации | 2024-01-15 10:30:00 |
| 24 | updated_at | timestamp | Да | Дата обновления | 2024-06-20 14:45:00 |

**Бизнес-правила:**
- BR-C001: БИН должен содержать 12 цифр и быть уникальным
- BR-C002: Компания считается верифицированной после прохождения аккредитации
- BR-C003: Статус "blocked" блокирует все операции компании

---

#### 3.2.2. account_usercompany (Связь пользователь-компания)

**Описание:** Связь многие-ко-многим между пользователями и компаниями с указанием роли.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Уникальный идентификатор | 5000 |
| 2 | user_id | integer | Да (FK) | Идентификатор пользователя | 12345 |
| 3 | company_id | integer | Да (FK) | Идентификатор компании | 1000 |
| 4 | role | varchar(20) | Да | Роль в компании | owner, member, advisor |
| 5 | verified | boolean | Да | Подтверждение связи | true |

**Бизнес-правила:**
- BR-UC001: У компании может быть только один owner
- BR-UC002: Пользователь может быть связан с несколькими компаниями
- BR-UC003: Уникальная комбинация user_id + company_id

---

### 3.3. Предметная область: Государственные услуги

#### 3.3.1. service_service (Услуга/Сервис)

**Описание:** Каталог государственных и внутренних услуг платформы.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | code | varchar | Да (PK) | Уникальный код услуги | accreditation |
| 2 | data | jsonb | Да | Данные услуги (название, описание) | {"name": {"ru": "..."}} |
| 3 | organization_id | varchar(20) | Нет (FK) | Организация-владелец | astanahub |
| 4 | hub_form_id | integer | Нет (FK) | Форма для заполнения | 100 |
| 5 | page_id | integer | Нет (FK) | Лендинг услуги | 50 |

**Примеры услуг:**
| Код | Наименование |
|-----|--------------|
| accreditation | Аккредитация IT-компании |
| startup_register | Реестр стартапов |
| techorda_request | Заявка на TechOrda |
| seedmoney | Грант Seed Money |
| mat_pass | Материальный пропуск |

---

#### 3.3.2. service_servicerequest (Заявка на услугу)

**Описание:** Заявки пользователей/компаний на получение услуг.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Уникальный идентификатор заявки | 50000 |
| 2 | service_id | varchar | Да (FK) | Код услуги | accreditation |
| 3 | status | varchar(20) | Да | Статус заявки | draft, sent, approved, success, reject |
| 4 | author_id | integer | Да (FK) | Автор заявки (пользователь) | 12345 |
| 5 | company_id | integer | Нет (FK) | Компания-заявитель | 1000 |
| 6 | assignee_id | integer | Нет (FK) | Назначенный исполнитель | 100 |
| 7 | expert_id | integer | Нет (FK) | Назначенный эксперт | 200 |
| 8 | hub_form_data_id | integer | Нет (FK) | Данные заполненной формы | 30000 |
| 9 | parent_id | integer | Нет (FK) | Родительская заявка | null |
| 10 | data | jsonb | Да | Дополнительные данные | {"signatures": [...]} |
| 11 | created_at | timestamp | Да | Дата создания | 2024-12-01 10:00:00 |
| 12 | updated_at | timestamp | Да | Дата обновления | 2024-12-03 15:30:00 |

**Бизнес-правила:**
- BR-SR001: Заявка создаётся в статусе "draft"
- BR-SR002: Переход в "sent" только после заполнения обязательных полей формы
- BR-SR003: Только модератор может изменить статус на "approved" или "reject"
- BR-SR004: Статус "success" устанавливается после финального одобрения

---

#### 3.3.3. service_hubform (Форма заявки)

**Описание:** Шаблоны форм для заполнения при подаче заявок.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор формы | 100 |
| 2 | organization_id | varchar(20) | Нет (FK) | Организация | astanahub |
| 3 | data | jsonb | Да | Метаданные формы | {"title": "..."} |

---

#### 3.3.4. service_hubformdata (Данные формы)

**Описание:** Заполненные данные форм заявок.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор | 30000 |
| 2 | hub_form_id | integer | Да (FK) | Ссылка на шаблон формы | 100 |
| 3 | data | jsonb | Да | Заполненные данные | {"Full_name": "Алмас", ...} |

**Примечание:** Структура поля data зависит от конкретной формы. Типичные поля:
- Full_name - ФИО заявителя
- Priority_area - Приоритетное направление
- Technologies_used - Используемые технологии
- Expected_results - Ожидаемые результаты

---

### 3.4. Предметная область: Контент-менеджмент

#### 3.4.1. core_event (Событие/Мероприятие)

**Описание:** Информация о событиях и мероприятиях платформы.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор события | 500 |
| 2 | title | jsonb | Да | Название (мультиязычное) | {"ru": "Конференция", "kk": "...", "en": "..."} |
| 3 | content | jsonb | Да | Описание (мультиязычное) | {"ru": "<p>...</p>"} |
| 4 | slug | varchar(250) | Да | URL-slug | conference-2024 |
| 5 | status | varchar(20) | Да | Статус | draft, sent, success, reject |
| 6 | event_type | varchar(20) | Нет | Тип события | open_event, closed_event |
| 7 | event_format | varchar(20) | Да | Формат | astanahub, online, hybrid |
| 8 | datetime_start | timestamp | Нет | Дата и время начала | 2024-12-15 10:00:00 |
| 9 | datetime_end | timestamp | Нет | Дата и время окончания | 2024-12-15 18:00:00 |
| 10 | published | boolean | Да | Признак публикации | true |
| 11 | author_id | integer | Да (FK) | Автор события | 12345 |
| 12 | company_id | integer | Нет (FK) | Компания-организатор | 1000 |
| 13 | organization_id | varchar(20) | Нет (FK) | Организация | astanahub |
| 14 | view_count | integer | Да | Количество просмотров | 1500 |
| 15 | contact_info | jsonb | Да | Контактная информация | {"email": "...", "phone": "..."} |

**Бизнес-правила:**
- BR-E001: Событие публикуется только после модерации (status = success)
- BR-E002: datetime_end должен быть больше datetime_start
- BR-E003: Для формата "astanahub" обязательно указание hall (зала)

---

#### 3.4.2. core_vacancy (Вакансия)

**Описание:** Вакансии от компаний-резидентов.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор | 300 |
| 2 | title | jsonb | Да | Название вакансии | {"ru": "Python разработчик"} |
| 3 | description | jsonb | Да | Описание | {"ru": "Требования..."} |
| 4 | status | varchar(20) | Да | Статус | draft, sent, success |
| 5 | vacancy_type | varchar(20) | Нет | Тип занятости | fulltime, parttime, internship |
| 6 | salary_min | integer | Нет | Минимальная зарплата | 500000 |
| 7 | salary_max | integer | Нет | Максимальная зарплата | 1000000 |
| 8 | published | boolean | Да | Признак публикации | true |
| 9 | author_id | integer | Да (FK) | Автор | 12345 |
| 10 | company_id | integer | Нет (FK) | Компания | 1000 |
| 11 | city_id | integer | Нет (FK) | Город | 1 |

**Бизнес-правила:**
- BR-V001: salary_max >= salary_min
- BR-V002: Вакансия публикуется только от верифицированной компании

---

#### 3.4.3. core_blog (Блог-пост)

**Описание:** Публикации пользователей и компаний в блоге.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор | 800 |
| 2 | title | jsonb | Да | Заголовок | {"ru": "Как запустить стартап"} |
| 3 | subtitle | jsonb | Да | Подзаголовок | {"ru": "Пошаговое руководство"} |
| 4 | content | jsonb | Да | Содержимое (HTML) | {"ru": "<p>...</p>"} |
| 5 | slug | varchar(250) | Да | URL-slug | how-to-start-startup |
| 6 | status | varchar(20) | Да | Статус | draft, sent, success |
| 7 | published | boolean | Да | Признак публикации | true |
| 8 | author_id | integer | Да (FK) | Автор | 12345 |
| 9 | company_id | integer | Нет (FK) | Компания | 1000 |
| 10 | category_id | integer | Нет (FK) | Категория | 5 |
| 11 | tags | array | Да | Теги | ["startup", "guide"] |
| 12 | view_count | integer | Да | Просмотры | 2500 |
| 13 | favorite_users | array | Да | ID избранного | [123, 456, 789] |
| 14 | reaction_up_users | array | Да | ID лайков | [123, 456] |
| 15 | reaction_down_users | array | Да | ID дизлайков | [789] |

---

#### 3.4.4. core_comment (Комментарий)

**Описание:** Комментарии к различным сущностям (полиморфная связь).

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор | 2000 |
| 2 | message | text | Да | Текст комментария | Отличная статья! |
| 3 | source | varchar(50) | Да | Тип сущности | blog, event, vacancy, techtask |
| 4 | primary_key | varchar(20) | Да | ID сущности | 800 |
| 5 | user_id | integer | Да (FK) | Автор комментария | 12345 |
| 6 | parent_id | integer | Нет (FK) | Родительский комментарий | null |
| 7 | status | varchar(20) | Да | Статус | created, deleted |
| 8 | reaction_up_users | array | Да | Лайки | [123, 456] |
| 9 | reaction_down_users | array | Да | Дизлайки | [] |

**Бизнес-правила:**
- BR-CM001: Комментарий привязывается к сущности через source + primary_key
- BR-CM002: Поддержка вложенных комментариев через parent_id
- BR-CM003: Удалённые комментарии сохраняются со статусом "deleted"

---

### 3.5. Предметная область: Бронирование

#### 3.5.1. booking_room (Комната)

**Описание:** Справочник комнат для бронирования.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор | 10 |
| 2 | name | varchar(50) | Да | Название комнаты | Переговорная А |
| 3 | floor | smallint | Да | Этаж | 3 |
| 4 | max_people | smallint | Да | Максимальная вместимость | 12 |
| 5 | pavilion | varchar(10) | Нет | Павильон | C3 |
| 6 | is_active | boolean | Да | Доступность для бронирования | true |
| 7 | external_id | varchar(200) | Да | Внешний идентификатор | room-c3-301 |

---

#### 3.5.2. booking_booking (Бронирование)

**Описание:** Записи о бронировании комнат.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор | 5000 |
| 2 | status | varchar(20) | Да | Статус | active, finished, deactivated |
| 3 | title | varchar(100) | Да | Название встречи | Совещание по проекту |
| 4 | start | timestamp | Да | Время начала | 2024-12-15 10:00:00 |
| 5 | end | timestamp | Да | Время окончания | 2024-12-15 11:00:00 |
| 6 | room_id | integer | Да (FK) | Комната | 10 |
| 7 | author_id | integer | Да (FK) | Автор брони | 12345 |
| 8 | company_id | integer | Нет (FK) | Компания | 1000 |
| 9 | full_name | varchar(200) | Да | ФИО контактного лица | Алмас Касымов |
| 10 | email | varchar(200) | Да | Email | user@example.com |
| 11 | phone | varchar(30) | Да | Телефон | +77001234567 |

**Бизнес-правила:**
- BR-B001: Время окончания должно быть больше времени начала
- BR-B002: Нельзя создать пересекающиеся брони для одной комнаты
- BR-B003: Бронь можно отменить (deactivated) до её начала

---

### 3.6. Предметная область: Справочники

#### 3.6.1. core_organization (Организация)

**Описание:** Справочник организаций-партнёров платформы.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | code | varchar(20) | Да (PK) | Уникальный код | astanahub |
| 2 | name | jsonb | Да | Название (мультиязычное) | {"ru": "Астана Хаб"} |
| 3 | logo | varchar(100) | Нет | Путь к логотипу | /media/logos/ah.png |
| 4 | data | jsonb | Да | Дополнительные данные | {} |
| 5 | active | boolean | Да | Активность | true |

---

#### 3.6.2. core_category (Категория)

**Описание:** Категории для контента (блогов, статей).

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор | 5 |
| 2 | name | jsonb | Да | Название | {"ru": "Стартапы"} |
| 3 | slug | varchar(250) | Да | URL-slug | startups |
| 4 | is_active | boolean | Да | Активность | true |
| 5 | featured | boolean | Да | Показывать на главной | true |
| 6 | position | smallint | Да | Порядок сортировки | 1 |

---

#### 3.6.3. core_city (Город)

**Описание:** Справочник городов Казахстана.

| № | Атрибут | Тип данных | Обязательность | Описание | Пример значения |
|---|---------|------------|----------------|----------|-----------------|
| 1 | id | integer | Да (PK) | Идентификатор | 1 |
| 2 | name | varchar(200) | Да | Название (дефолт) | Астана |
| 3 | name_ru | varchar(200) | Нет | Название на русском | Астана |
| 4 | name_kk | varchar(200) | Нет | Название на казахском | Астана |
| 5 | name_en | varchar(200) | Нет | Название на английском | Astana |
| 6 | country_id | integer | Да (FK) | Страна | 1 |

---

## 4. Справочники значений (Классификаторы)

### 4.1. Роли пользователей (account_user.role)

| Код | Наименование | Описание |
|-----|--------------|----------|
| user | Пользователь | Обычный пользователь системы |
| admin | Администратор | Администратор с расширенными правами |
| superadmin | Суперадминистратор | Полный доступ к системе |
| moderator | Модератор | Модерация контента |
| expert | Эксперт | Эксперт для оценки заявок |
| manager | Менеджер | Менеджер услуг |
| cett_expert | Эксперт ЦЭТТ | Эксперт центра экспертизы |
| cett_moderator | Модератор ЦЭТТ | Модератор ЦЭТТ |
| techorda_manager | Менеджер TechOrda | Управление образовательными программами |
| niokr_admin | Админ НИОКР | Администратор научных проектов |

*Всего в системе 85+ различных ролей*

---

### 4.2. Типы компаний (account_company.company_type)

| Код | Наименование | Описание |
|-----|--------------|----------|
| law | Юридическое лицо | ТОО, АО и другие организационно-правовые формы |
| ip | ИП | Индивидуальный предприниматель |
| unknown | Не определено | Тип не указан |

---

### 4.3. Статусы компаний (account_company.status)

| Код | Наименование | Описание |
|-----|--------------|----------|
| active | Активная | Компания активна |
| blocked | Заблокирована | Компания заблокирована администратором |

---

### 4.4. Роли в компании (account_usercompany.role)

| Код | Наименование | Описание |
|-----|--------------|----------|
| owner | Владелец | Владелец компании, полные права |
| member | Сотрудник | Сотрудник компании |
| advisor | Консультант | Консультант/советник |

---

### 4.5. Статусы контента (общий для event, blog, vacancy, article)

| Код | Наименование | Описание |
|-----|--------------|----------|
| draft | Черновик | Создан, не отправлен на модерацию |
| sent | На модерации | Отправлен на проверку |
| correction | На доработке | Требуется исправление |
| success | Опубликован | Прошёл модерацию, опубликован |
| reject | Отклонён | Отклонён модератором |
| deleted | Удалён | Удалён автором или модератором |

---

### 4.6. Статусы заявок (service_servicerequest.status)

| Код | Наименование | Описание |
|-----|--------------|----------|
| draft | Черновик | Заявка создана, не отправлена |
| created | Создана | Заявка создана (для некоторых типов) |
| sent | Отправлена | Отправлена на рассмотрение |
| approved | Одобрена | Предварительно одобрена |
| success | Успешно завершена | Заявка одобрена и завершена |
| reject | Отклонена | Заявка отклонена |
| rejected | Отклонена (альт.) | Альтернативный код отклонения |

---

### 4.7. Типы событий (core_event.event_type)

| Код | Наименование | Описание |
|-----|--------------|----------|
| open_event | Открытое | Открытое для всех мероприятие |
| closed_event | Закрытое | Мероприятие по приглашениям |

---

### 4.8. Форматы событий (core_event.event_format)

| Код | Наименование | Описание |
|-----|--------------|----------|
| astanahub | Офлайн | В помещении Астана Хаб |
| online | Онлайн | Онлайн-трансляция |
| hybrid | Гибридный | Офлайн + онлайн-трансляция |

---

### 4.9. Типы вакансий (core_vacancy.vacancy_type)

| Код | Наименование | Описание |
|-----|--------------|----------|
| fulltime | Полная занятость | Полный рабочий день |
| parttime | Частичная занятость | Неполный рабочий день |
| internship | Стажировка | Стажировка |
| project | Проектная работа | Работа на проект |
| volunteering | Волонтёрство | Волонтёрская работа |
| absense_period | Временная замена | Замещение на время отсутствия |

---

### 4.10. Статусы бронирования (booking_booking.status)

| Код | Наименование | Описание |
|-----|--------------|----------|
| active | Активное | Бронирование подтверждено |
| finished | Завершено | Бронирование завершилось |
| deactivated | Отменено | Бронирование отменено |

---

## 5. Бизнес-правила и ограничения

### 5.1. Целостность данных

| ID | Правило | Таблицы | Описание |
|----|---------|---------|----------|
| INT-001 | Уникальность телефона | account_user | Телефон пользователя должен быть уникальным |
| INT-002 | Уникальность email | account_user | Email должен быть уникальным (если указан) |
| INT-003 | Уникальность БИН | account_company | БИН компании должен быть уникальным |
| INT-004 | Формат ИИН | account_user | ИИН должен содержать ровно 12 цифр |
| INT-005 | Формат БИН | account_company | БИН должен содержать ровно 12 цифр |
| INT-006 | Один владелец | account_usercompany | У компании может быть только один owner |

### 5.2. Бизнес-логика

| ID | Правило | Описание |
|----|---------|----------|
| BL-001 | Публикация контента | Контент публикуется только после модерации (status = success) |
| BL-002 | Верификация компании | Компания считается верифицированной после успешной аккредитации |
| BL-003 | Подача заявки | Заявка может быть отправлена только после заполнения обязательных полей |
| BL-004 | Пересечение броней | Нельзя создать пересекающиеся брони для одной комнаты |
| BL-005 | Отмена брони | Бронь можно отменить только до её начала |
| BL-006 | Диапазон зарплат | salary_max должен быть >= salary_min |
| BL-007 | Срок события | datetime_end должен быть > datetime_start |

### 5.3. Доступ и безопасность

| ID | Правило | Описание |
|----|---------|----------|
| SEC-001 | Шифрование ПДн | Персональные данные (email, имена) хранятся в зашифрованном виде |
| SEC-002 | Хеширование паролей | Пароли хранятся в виде хеша (pbkdf2_sha256) |
| SEC-003 | Блокировка аккаунта | После 5 неудачных попыток входа аккаунт блокируется на 30 минут |
| SEC-004 | Срок действия кода | Код активации действителен 10 минут |

---

## 6. Версионирование документа

| Версия | Дата | Автор | Изменения |
|--------|------|-------|-----------|
| 1.0 | 2025-12-04 | Системный аналитик | Первоначальная версия |

---

*Документ является частью технической документации ИС TechHub*
