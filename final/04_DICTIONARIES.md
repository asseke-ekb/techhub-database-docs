# TechHub - Справочники значений

## 1. Роли пользователей

### 1.1. Системные роли (account_user.role)

| Код | Название | Описание | Права |
|-----|----------|----------|-------|
| `user` | Пользователь | Обычный пользователь системы | Базовые права |
| `admin` | Администратор | Администратор с расширенными правами | Управление системой |
| `superadmin` | Суперадминистратор | Полный доступ к системе | Всё |
| `moderator` | Модератор | Модерация контента | Одобрение/отклонение контента |
| `expert` | Эксперт | Эксперт для оценки заявок | Экспертиза заявок |
| `manager` | Менеджер | Менеджер услуг | Управление заявками |
| `cett_expert` | Эксперт ЦЭТТ | Эксперт центра экспертизы | Экспертиза ЦЭТТ |
| `cett_moderator` | Модератор ЦЭТТ | Модератор ЦЭТТ | Модерация ЦЭТТ |
| `techorda_manager` | Менеджер TechOrda | Управление образовательными программами | TechOrda |
| `niokr_admin` | Админ НИОКР | Администратор научных проектов | НИОКР |

### 1.2. Роли в компании (account_usercompany.role)

| Код | Название | Описание |
|-----|----------|----------|
| `owner` | Владелец | Владелец компании, полные права. **Только один на компанию** |
| `member` | Сотрудник | Сотрудник компании |
| `advisor` | Консультант | Консультант/советник |

---

## 2. Типы и статусы компаний

### 2.1. Типы компаний (account_company.company_type)

| Код | Название | Описание |
|-----|----------|----------|
| `law` | Юридическое лицо | ТОО, АО и другие организационно-правовые формы |
| `ip` | ИП | Индивидуальный предприниматель |
| `unknown` | Не определено | Тип не указан |

### 2.2. Статусы компаний (account_company.status)

| Код | Название | Описание |
|-----|----------|----------|
| `active` | Активная | Компания активна, может работать в системе |
| `blocked` | Заблокирована | Компания заблокирована администратором |

### 2.3. Теги компаний (JSONB-поля)

| Поле | Тег | Описание |
|------|-----|----------|
| `tag_startup` | Стартап | Компания в реестре стартапов |
| `tag_it_company` | IT-компания | Аккредитованная IT-компания |
| `tag_techpark` | Резидент технопарка | Резидент Astana Hub |
| `tag_corp_partner` | Корп. партнёр | Корпоративный партнёр |
| `tag_nii` | НИИ | Научно-исследовательский институт |
| `tag_ts_member` | Член Tech Summit | Участник Tech Summit |
| `tag_nedrouser` | Недропользователь | Компания-недропользователь |

**Структура тега:**
```json
{
  "status": "active",       // active, inactive, pending
  "date_from": "2024-01-15",
  "date_to": null,
  "data": {}
}
```

---

## 3. Статусы контента

### 3.1. Общие статусы (event, vacancy, blog, article)

| Код | Название | Описание | Следующий статус |
|-----|----------|----------|------------------|
| `draft` | Черновик | Создан, не отправлен на модерацию | → sent |
| `sent` | На модерации | Отправлен на проверку | → success / correction / reject |
| `correction` | На доработке | Требуется исправление | → sent |
| `success` | Опубликован | Прошёл модерацию, опубликован | — |
| `reject` | Отклонён | Отклонён модератором | — |
| `deleted` | Удалён | Удалён автором или модератором | — |

### 3.2. Диаграмма переходов

```
┌─────────┐     отправить     ┌─────────┐
│  draft  │──────────────────►│  sent   │
└─────────┘                   └────┬────┘
                                   │
                    ┌──────────────┼──────────────┐
                    │              │              │
                    ▼              ▼              ▼
             ┌───────────┐  ┌──────────┐  ┌──────────┐
             │correction │  │ success  │  │  reject  │
             └─────┬─────┘  └──────────┘  └──────────┘
                   │
                   │ исправить
                   ▼
             ┌─────────┐
             │  sent   │
             └─────────┘
```

---

## 4. Статусы заявок на услуги

### 4.1. Статусы (service_servicerequest.status)

| Код | Название | Описание |
|-----|----------|----------|
| `draft` | Черновик | Заявка создана, не отправлена |
| `created` | Создана | Заявка создана (для некоторых типов) |
| `sent` | Отправлена | Отправлена на рассмотрение |
| `approved` | Одобрена | Предварительно одобрена |
| `success` | Успешно завершена | Заявка одобрена и завершена |
| `reject` | Отклонена | Заявка отклонена |
| `rejected` | Отклонена (альт.) | Альтернативный код отклонения |

### 4.2. Жизненный цикл заявки

```
┌─────────┐                   ┌─────────┐                   ┌──────────┐
│  draft  │ ─── отправить ──► │  sent   │ ─── проверка ───► │ approved │
└─────────┘                   └────┬────┘                   └────┬─────┘
                                   │                              │
                             доработка                        экспертиза
                                   │                              │
                                   ▼                              ▼
                            ┌───────────┐                  ┌──────────┐
                            │correction │                  │ success  │
                            └───────────┘                  └──────────┘
                                   │
                                   │                       ┌──────────┐
                                   └──────────────────────►│  reject  │
                                                           └──────────┘
```

---

## 5. События

### 5.1. Типы событий (core_event.event_type)

| Код | Название | Описание |
|-----|----------|----------|
| `open_event` | Открытое | Открытое для всех мероприятие |
| `closed_event` | Закрытое | Мероприятие по приглашениям |

### 5.2. Форматы событий (core_event.event_format)

| Код | Название | Описание |
|-----|----------|----------|
| `astanahub` | Офлайн | В помещении Астана Хаб |
| `online` | Онлайн | Онлайн-трансляция |
| `hybrid` | Гибридный | Офлайн + онлайн-трансляция |

---

## 6. Вакансии

### 6.1. Типы вакансий (core_vacancy.vacancy_type)

| Код | Название | Описание |
|-----|----------|----------|
| `fulltime` | Полная занятость | Полный рабочий день |
| `parttime` | Частичная занятость | Неполный рабочий день |
| `internship` | Стажировка | Стажировка |
| `project` | Проектная работа | Работа на проект |
| `volunteering` | Волонтёрство | Волонтёрская работа |
| `absense_period` | Временная замена | Замещение на время отсутствия |

---

## 7. Бронирование

### 7.1. Статусы бронирования (booking_booking.status)

| Код | Название | Описание |
|-----|----------|----------|
| `active` | Активное | Бронирование подтверждено |
| `finished` | Завершено | Бронирование завершилось (время прошло) |
| `deactivated` | Отменено | Бронирование отменено пользователем |

### 7.2. Переходы статусов

```
┌─────────┐                   ┌──────────┐
│ active  │ ─── время ──────► │ finished │
└────┬────┘                   └──────────┘
     │
     │ отмена
     ▼
┌─────────────┐
│ deactivated │
└─────────────┘
```

---

## 8. Каталог услуг

### 8.1. Основные услуги (service_service.code)

| Код | Название | Описание |
|-----|----------|----------|
| `accreditation` | Аккредитация IT-компании | Получение статуса аккредитованной IT-компании |
| `startup_register` | Реестр стартапов | Включение в реестр стартапов |
| `techpark_register` | Резидентство технопарка | Получение статуса резидента |
| `seedmoney` | Грант Seed Money | Заявка на грант Seed Money |
| `techorda_request` | Заявка на TechOrda | Заявка на образовательную программу |
| `mat_pass` | Материальный пропуск | Пропуск для провоза материалов |
| `visa_support` | Визовая поддержка | Поддержка в получении визы |
| `consulting` | Консультации | Консультационные услуги |
| `workspace` | Рабочее место | Аренда рабочего места |
| `event_request` | Заявка на мероприятие | Проведение мероприятия в хабе |

---

## 9. Организации

### 9.1. Справочник организаций (core_organization.code)

| Код | Название |
|-----|----------|
| `astanahub` | Астана Хаб |
| `qazinnovations` | QazInnovations |
| `zerde` | Zerde |
| `techorda` | TechOrda |

---

## 10. Типы активации

### 10.1. Типы кодов активации (account_activation.type)

| Код | Описание |
|-----|----------|
| `registration` | Регистрация нового пользователя |
| `password_reset` | Сброс пароля |
| `email_change` | Смена email |
| `phone_change` | Смена телефона |
| `login` | Вход в систему (2FA) |

---

## 11. Мультиязычность

### 11.1. Языковые коды

Текстовые поля (title, content, name, description) хранятся в JSONB с ключами:

| Код | Язык |
|-----|------|
| `ru` | Русский |
| `kk` | Казахский |
| `en` | Английский |

### 11.2. Пример структуры

```json
{
  "ru": "Текст на русском",
  "kk": "Қазақша мәтін",
  "en": "English text"
}
```

### 11.3. Извлечение в SQL

```sql
-- Русский текст
SELECT title->>'ru' FROM core_event;

-- С fallback
SELECT COALESCE(
    title->>'ru',
    title->>'kk',
    title->>'en'
) as title FROM core_event;
```

---

## 12. Boolean-флаги

### 12.1. Общие флаги

| Поле | Описание | Где используется |
|------|----------|------------------|
| `is_active` | Активность записи | user, room |
| `blocked` | Заблокирован | user |
| `verified` | Верифицирован/Подтверждён | company, usercompany |
| `published` | Опубликовано | event, vacancy, blog |
| `email_verified` | Email подтверждён | user |
| `phone_verified` | Телефон подтверждён | user |
| `is_staff` | Сотрудник (доступ в админку) | user |
| `is_superuser` | Суперпользователь | user |

---

*Далее: [05_SQL_EXAMPLES.md](05_SQL_EXAMPLES.md) — SQL-запросы*
